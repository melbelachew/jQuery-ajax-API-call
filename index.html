<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Favorite Movies</title>    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link rel="stylesheet" type="text/css" href="./assets/stylesheet.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  
  </head>

  <body>
    
    <div class="container">
      <div class = "w3-container w3-center w3-animate-left"><h2>Favorite Movies</h2>
      <p>Movie data populated from OMBD API using an AJAX GET method.Table row/data dynamically created using jquery</p></div>
      <table class="table" id = "table">
        <thead>
          <tr>
            <th scope="col">Movie Name</th>
            <th scope="col">Year</th>
            <th scope="col">Actors</th>
            <th scope="col">Plot</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Interstellar</td>
            <td>2014</td>
            <td>
              Ellen Burstyn, Matthew McConaughey, Mackenzie Foy, John Lithgow
            </td>
            <td>
              A team of explorers travel through a wormhole in space in an
              attempt to ensure humanity's survival
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type='text/javascript' src='config.js'></script>
    <script type="text/javascript">
    
      var mykey = config.MY_KEY;
      var movie = "Inception";
      var queryURL =
        "https://www.omdbapi.com/?t=" + movie + "&y=&plot=short&apikey=" + mykey;

      $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
        console.log(typeof response);
        var tRow = $("<tr>");

        // Create new table row and updated text with the 3 td elements containing the Title, Year, and Actors from the AJAX response object
        var titleTd = $("<td>").text(response.Title);
        var yearTd = $("<td>").text(response.Year);
        var actorsTd = $("<td>").text(response.Actors);
        var plotTd = $("<td>").text(response.Plot);

        // Append the td elements to the new table row

        tRow.append(titleTd, yearTd, actorsTd, plotTd);
        
        // Append the table row to the tbody element

        $("tbody").append(tRow);

        
      });

      var mykey = config.MY_KEY;
      var movie = "The Matrix";
      var queryURL =
        "https://www.omdbapi.com/?t=" + movie + "&y=&plot=short&apikey=" + mykey;

      $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
        console.log(response);
        var tRow = $("<tr>");
        var tBody = $("tbody");

        var titleTd = $("<td>").text(response.Title);
        var yearTd = $("<td>").text(response.Year);
        var actorsTd = $("<td>").text(response.Actors);
        var plotTd = $("<td>").text(response.Plot);

        tRow.append(titleTd, yearTd, actorsTd, plotTd);

        tBody.append(tRow);
      });
      var mykey = config.MY_KEY;
      var movie = "Shutter Island";
      var queryURL =
        "https://www.omdbapi.com/?t=" + movie + "&y=&plot=short&apikey=" + mykey;

      $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
        console.log(response);
        var tRow = $("<tr>");
        var tBody = $("tbody");

        var titleTd = $("<td>").text(response.Title);
        var yearTd = $("<td>").text(response.Year);
        var actorsTd = $("<td>").text(response.Actors);
        var plotTd = $("<td>").text(response.Plot);

        tRow.append(titleTd, yearTd, actorsTd, plotTd);

        tBody.append(tRow);
      });
      var mykey = config.MY_KEY;
      var movie = "The butterfly effect";
      var queryURL =
        "https://www.omdbapi.com/?t=" + movie + "&y=&plot=short&apikey=" + mykey;

      $.ajax({
        url: queryURL,
        method: "GET"
      }).then(function(response) {
        console.log(response);
        var tRow = $("<tr>");
        var tBody = $("tbody");

        var titleTd = $("<td>").text(response.Title);
        var yearTd = $("<td>").text(response.Year);
        var actorsTd = $("<td>").text(response.Actors);
        var plotTd = $("<td>").text(response.Plot);

        tRow.append(titleTd, yearTd, actorsTd, plotTd);

        tBody.append(tRow);
      });
    
    </script>
  </body>
</html>
